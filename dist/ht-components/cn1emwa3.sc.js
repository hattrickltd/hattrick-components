/*! Built with http://stenciljs.com */
const{h:t}=window.HtComponents;class e{constructor(){this.daysText="days",this.keepCounting=!1,this.maxHours=72}componentWillLoad(){this.deadlineUpdated(),this._interval=setInterval(()=>this.updateTime(),1e3)}componentDidUnload(){this._interval&&clearInterval(this._interval)}deadlineUpdated(){var t;this._deadline=(t=this.deadline,t?("string"==typeof t&&(t=Date.parse(t.replace(/(\d{4}-\d{2}-\d{2}).(\d{2}:\d{2}:\d{2}.*?\+\d{2}).?(\d{2})/,"$1T$2:$3"))),"number"==typeof t&&(t=new Date(t)),t):new Date).getTime(),this.updateTime()}updateTime(){this.seconds=Math.floor((this._deadline-Date.now())/1e3),this.seconds<=0&&!this.keepCounting&&(clearInterval(this._interval),this._interval=void 0)}getTime(){if(this.shouldShowDaysText())return`${Math.floor(this.seconds/24/60/60)} ${this.daysText}`;if(this.seconds>=0){const t=Math.floor(this.seconds/60/60),e=Math.floor(this.seconds/60%60),s=Math.floor(this.seconds%60);return this.format(t,e,s)}if(this.seconds<0&&this.keepCounting){const t=Math.floor(-this.seconds/60/60),e=Math.floor(-this.seconds/60%60),s=Math.floor(-this.seconds%60);return this.format(t,e,s)}return"00:00:00"}shouldShowDaysText(){return this.seconds>60*this.maxHours*60}padLeft(t){return t<10?"0"+t:t.toString()}format(t,e,s){return`${this.padLeft(t)}:${this.padLeft(e)}:${this.padLeft(s)}`}hostData(){return{seconds:this.seconds,role:"timer",class:{"ht-timer-passed-zero":this.keepCounting&&this.seconds<0,"ht-timer-finished":!this.keepCounting&&this.seconds<=0}}}render(){return t("span",null,this.getTime())}static get is(){return"ht-timer"}static get encapsulation(){return"shadow"}static get properties(){return{daysText:{type:String,attr:"days-text"},deadline:{type:"Any",attr:"deadline",watchCallbacks:["deadlineUpdated"]},keepCounting:{type:Boolean,attr:"keep-counting"},maxHours:{type:Number,attr:"max-hours"},seconds:{state:!0}}}static get style(){return"[data-ht-timer-host]{font-variant-numeric:tabular-nums lining-nums}"}}export{e as HtTimer};